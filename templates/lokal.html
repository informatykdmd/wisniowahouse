{% extends 'base.html' %}
{% block content %}
<!-- Breadcrumbs -->
<!-- <section class="bg-gray-7">
    <div class="breadcrumbs-custom box-transform-wrap context-dark">
      <div class="container">
        <h3 class="breadcrumbs-custom-title">{{lokal_data.nazwa}}</h3>
        <div class="breadcrumbs-custom-decor"></div>
      </div>
      <div class="box-transform" style="background-image: url(../static/images/bg-project.jpg);"></div>
      <div class="box-transform-lokal" style="background-image: url(../static/images/vis/vis-1-{{lokal_data.id_lokalu}}.png);"></div>
    </div>
    <div class="container">
      <ul class="breadcrumbs-custom-path">
        <li><a href="/"><i class="bi bi-house" style="font-size: 24px;"></i></a></li>
        <li><a href="/lokale">Lokale</a></li>
        <li class="active">{{lokal_data.id_lokalu}}</li>
      </ul>
    </div>
  </section> -->
  
<!-- Breadcrumbs -->
<!-- <section class="lokal-bg">
  <div class="lokal-banner">

    <div class="lokal-banner-bg" style="background-image: url(../static/images/modules/breadcrumbs-{{lokal_data.id_lokalu}}.png);"></div>
  </div>

  <div class="container">
    <ul class="breadcrumbs-custom-path">
      <li><a href="/"><i class="bi bi-house" style="font-size: 24px;"></i></a></li>
      <li><a href="/lokale">Lokale</a></li>
      <li class="active">{{lokal_data.id_lokalu}}</li>
    </ul>
  </div>
</section> -->
<section class="section swiper-container swiper-slider swiper-slider-2 swiper-slider-3" data-loop="false" data-autoplay="500000000" data-simulate-touch="false" data-slide-effect="fade">
  <div class="swiper-wrapper text-sm-start">
    <div class="swiper-slide context-dark" data-slide-bg="../static/images/modules/breadcrumbs-{{lokal_data.id_lokalu}}.png">
      <div class="swiper-slide-caption section-md">
        <div class="container">
          <div class="row">
            <div class="col-sm-9 col-md-8 col-lg-7 col-xl-6 offset-lg-1 offset-xxl-0">
              <h3 class="oh swiper-title"><span class="d-inline-block" data-caption-animate="slideInUp" data-caption-delay="0">Affordable <br>wooden solutions</span></h3>
              <p class="big swiper-text" data-caption-animate="fadeInLeft" data-caption-delay="300">We value our clients and offer them highly affordable prices on services we provide.</p>
              <!-- <a class="button button-lg button-primary button-winona button-shadow-2" href="services.html" data-caption-animate="fadeInUp" data-caption-delay="300">View our services</a> -->
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- <div class="swiper-slide context-dark" data-slide-bg="../static/images/modules/breadcrumbs-{{lokal_data.id_lokalu}}.png">
      <div class="swiper-slide-caption section-md">
        <div class="container">
          <div class="row">
            <div class="col-sm-8 col-lg-6 offset-lg-1 offset-xxl-0">
              <h3 class="oh swiper-title"><span class="d-inline-block" data-caption-animate="slideInDown" data-caption-delay="0">Quality wood processing</span></h3>
              <p class="big swiper-text" data-caption-animate="fadeInRight" data-caption-delay="300">Our team offers wood processing services to companies and individual clients.</p>
              <div class="button-wrap oh"><a class="button button-lg button-primary button-winona button-shadow-2" href="services-2.html" data-caption-animate="slideInUp" data-caption-delay="0">View our services</a></div>
            </div>
          </div>
        </div>
      </div>
    </div> -->
    <!-- <div class="swiper-slide context-dark" data-slide-bg="../static/images/modules/breadcrumbs-{{lokal_data.id_lokalu}}.png">
      <div class="swiper-slide-caption section-md">
        <div class="container">
          <div class="row">
            <div class="col-sm-8 col-lg-6 offset-lg-1 offset-xxl-0">
              <h3 class="oh swiper-title"><span class="d-inline-block" data-caption-animate="slideInLeft" data-caption-delay="100">Reliable wooden furniture</span></h3>
              <p class="big swiper-text" data-caption-animate="fadeInUp" data-caption-delay="0">Our company offers custom-made furniture made of the best American wood.</p>
              <div class="button-wrap oh"><a class="button button-lg button-primary button-winona button-shadow-2" href="services-3.html" data-caption-animate="slideInLeft" data-caption-delay="100">View our services</a></div>
            </div>
          </div>
        </div>
      </div>
    </div> -->
    <!-- <div class="swiper-slide context-dark" data-slide-bg="../static/images/modules/breadcrumbs-{{lokal_data.id_lokalu}}.png">
      <div class="swiper-slide-caption section-md">
        <div class="container">
          <div class="row">
            <div class="col-sm-8 col-lg-6 offset-lg-1 offset-xxl-0">
              <h3 class="oh swiper-title"><span class="d-inline-block" data-caption-animate="slideInUp" data-caption-delay="0">Woodworking <br>is Our Passion</span></h3>
              <p class="big swiper-text" data-caption-animate="fadeInRight" data-caption-delay="300">Since 1980, we have been offering quality wooden products to our clients worldwide.</p>
              <div class="button-wrap oh">
                <a class="button button-lg button-primary button-winona button-shadow-2" href="services-4.html" data-caption-animate="fadeInDown" data-caption-delay="0">View our services</a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div> -->
  </div>
  <!-- Swiper Pagination-->
  <!-- <div class="swiper-pagination" data-bullet-custom="true"></div> -->
  <!-- Swiper Navigation-->
  <!-- <div class="swiper-button-prev">
    <div class="preview">
      <div class="preview__img"></div>
    </div>
    <div class="swiper-button-arrow"></div>
  </div>
  <div class="swiper-button-next">
    <div class="swiper-button-arrow"></div>
    <div class="preview">
      <div class="preview__img"></div>
    </div>
  </div> -->
</section>


  <!-- Project Page-->
  <section class="section section-lg bg-default text-md-start">
    <div class="container">
      <div class="row row-60 flex-lg-row-reverse">
        <div class="col-lg-6 col-xl-7">
          <div class="slick-project">
            <!-- Slick Carousel-->
            <div class="slick-slider carousel-parent" data-arrows="true" data-autoplay="true" data-swipe="true" data-items="1" data-child="#child-carousel-7" data-for="#child-carousel-7" data-slide-effect="true">
              <div class="item"><img src="../static/images/vis/vis-1-{{lokal_data.id_lokalu}}.png" alt="" width="670" height="377"/>
                <div class="slick-project-caption">
                  <div class="slick-project-title">Od frontu</div>
                </div>
              </div>
              <div class="item"><img src="../static/images/vis/vis-2-{{lokal_data.id_lokalu}}.png" alt="" width="670" height="377"/>
                <div class="slick-project-caption">
                  <div class="slick-project-title">Od ogrodu</div>
                </div>
              </div>
              <div class="item"><img src="../static/images/vis/pom-1-{{lokal_data.id_lokalu}}.png" alt="" width="670" height="377"/>
                <div class="slick-project-caption">
                  <div class="slick-project-title">Pomieszczenia</div>
                </div>
              </div>
              <div class="item"><img src="../static/images/vis/pom-2-{{lokal_data.id_lokalu}}.png" alt="" width="670" height="377"/>
                <div class="slick-project-caption">
                  <div class="slick-project-title">Przestrzenie własne</div>
                </div>
              </div>
            </div>
            <div class="slick-slider child-carousel" id="child-carousel-7" data-for=".carousel-parent" data-items="3" data-sm-items="3" data-md-items="4" data-lg-items="3" data-xl-items="4" data-slide-to-scroll="1">
              <div class="item"><img src="../static/images/vis/vis-1-{{lokal_data.id_lokalu}}.png" alt="" width="670" height="377"/>
              </div>
              <div class="item"><img src="../static/images/vis/vis-2-{{lokal_data.id_lokalu}}.png" alt="" width="670" height="377"/>
              </div>
              <div class="item"><img src="../static/images/vis/pom-1-{{lokal_data.id_lokalu}}.png" alt="" width="670" height="377"/>
              </div>
              <div class="item"><img src="../static/images/vis/pom-2-{{lokal_data.id_lokalu}}.png" alt="" width="670" height="377"/>
              </div>
            </div>
          </div>
          <div class="table-custom-responsive">
            <h4>FAQ</h4>
            <!-- Bootstrap collapse-->
            <div class="card-group-classic" id="accordion6" role="tablist" aria-multiselectable="false">
              <!-- Bootstrap card-->
              <article class="card card-custom card-classic card-classic-2 wow fadeInLeft">
                <div class="card-header" role="tab">
                  <div class="card-title">
                    <a id="accordion6-card-head-jdocllls" data-bs-toggle="collapse" data-bs-parent="#accordion6" href="#accordion6-card-body-jifuxnja" aria-controls="accordion6-card-body-jifuxnja" aria-expanded="true" role="button">
                      Czy lokale są sprzedawane w stanie deweloperskim czy wykończone pod klucz?
                      <div class="card-arrow"></div>
                    </a>
                  </div>
                </div>
                <div class="collapse show" id="accordion6-card-body-jifuxnja" aria-labelledby="accordion6-card-head-jdocllls" data-bs-parent="#accordion6" role="tabpanel">
                  <div class="card-body">
                    <p>
                      Wiśniowa House oferuje lokale w stanie deweloperskim, co pozwala na dowolną aranżację przestrzeni 
                      według własnych potrzeb. Dla osób preferujących gotowe rozwiązania, istnieje możliwość skorzystania 
                      z opcji wykończenia pod klucz, dostosowanej do indywidualnych wymagań klienta.
                    </p>
                  </div>
                </div>
              </article>
              <!-- Bootstrap card-->
              <article class="card card-custom card-classic card-classic-2 wow fadeInLeft" data-wow-delay=".05s">
                <div class="card-header" role="tab">
                  <div class="card-title">
                    <a class="collapsed" id="accordion6-card-head-faq2" data-bs-toggle="collapse" data-bs-parent="#accordion6" href="#accordion6-card-body-faq2" aria-controls="accordion6-card-body-faq2" aria-expanded="false" role="button">
                      Jakie są opcje finansowania zakupu lokalu?
                      <div class="card-arrow"></div>
                    </a>
                  </div>
                </div>
                <div class="collapse" id="accordion6-card-body-faq2" aria-labelledby="accordion6-card-head-faq2" data-bs-parent="#accordion6" role="tabpanel">
                  <div class="card-body">
                    <p>
                      Deweloper współpracuje z zaufanymi doradcami kredytowymi, którzy pomogą znaleźć najlepsze rozwiązanie 
                      finansowe. Możesz skorzystać z kredytu hipotecznego lub innych form finansowania, a także liczyć na 
                      pełne wsparcie przy załatwianiu formalności.
                    </p>
                  </div>
                </div>
              </article>
              <!-- Bootstrap card-->
              <article class="card card-custom card-classic card-classic-2 wow fadeInLeft" data-wow-delay=".1s">
                <div class="card-header" role="tab">
                  <div class="card-title">
                    <a class="collapsed" id="accordion6-card-head-faq3" data-bs-toggle="collapse" data-bs-parent="#accordion6" href="#accordion6-card-body-faq3" aria-controls="accordion6-card-body-faq3" aria-expanded="false" role="button">
                      Czy osiedle jest wyposażone w ekologiczne technologie?
                      <div class="card-arrow"></div>
                    </a>
                  </div>
                </div>
                <div class="collapse" id="accordion6-card-body-faq3" aria-labelledby="accordion6-card-head-faq3" data-bs-parent="#accordion6" role="tabpanel">
                  <div class="card-body">
                    <p>
                      Tak, Wiśniowa House stawia na ekologiczne rozwiązania, takie jak energooszczędne systemy ogrzewania, 
                      dobre izolacje termiczne oraz przygotowanie infrastruktury pod instalacje fotowoltaiczne. Dbamy o 
                      środowisko, jednocześnie zapewniając niższe koszty utrzymania dla mieszkańców.
                    </p>
                  </div>
                </div>
              </article>
              <!-- Bootstrap card-->
              <article class="card card-custom card-classic card-classic-2 wow fadeInLeft" data-wow-delay=".15s">
                <div class="card-header" role="tab">
                  <div class="card-title">
                    <a class="collapsed" id="accordion6-card-head-faq4" data-bs-toggle="collapse" data-bs-parent="#accordion6" href="#accordion6-card-body-faq4" aria-controls="accordion6-card-body-faq4" aria-expanded="false" role="button">
                      Kiedy planowane jest zakończenie budowy i oddanie lokali do użytku?
                      <div class="card-arrow"></div>
                    </a>
                  </div>
                </div>
                <div class="collapse" id="accordion6-card-body-faq4" aria-labelledby="accordion6-card-head-faq4" data-bs-parent="#accordion6" role="tabpanel">
                  <div class="card-body">
                    <p>
                      Planowane zakończenie budowy to IV kwartał 2025 roku. Po tym terminie rozpocznie się proces odbiorów 
                      technicznych oraz przekazywania lokali nowym właścicielom. Szczegółowy harmonogram można uzyskać, 
                      kontaktując się z biurem sprzedaży.
                    </p>
                  </div>
                </div>
              </article>
            </div>
          </div>
        </div>
        <div class="col-lg-6 col-xl-5">
          <div class="project-page">
            <h5>{{lokal_data.nazwa}}</h5>

            <ul class="lokal-info mt-3 mw-70">
              <li><span class="label">Budynek:</span> {{lokal_data.id_lokalu[0]}}</li>
              <li><span class="label">Lokal:</span> {{lokal_data.id_lokalu}}</li>
              <li><span class="label">Typ budynku:</span> {{lokal_data.typ_zabudowy}}</li>
              <li><span class="label">Umiejscowienie:</span> {{lokal_data.umiejscowienie}}</li>
              <li><span class="label">Powierzchnia całkowita:</span> {{lokal_data.powierzchnia_m2}} m²</li>
              <li><span class="label">Powierzchnia użytkowa:</span> <span class="highlight">{{lokal_data.powierzchnia_uzytkowa_m2}} m²</span></li>
              <li><span class="label">Cena:</span> <span class="highlight price">{{lokal_data.cena_wyjsciowa}} PLN</span></li>
            </ul>
            <p>{{lokal_data.opis}}</p>
            
            <a  class="button button-lg button-primary button-winona" 
                download="card-{{lokal_data.id_lokalu}}.pdf" 
                href="{{ url_for('download_file', filename='card-' + lokal_data.id_lokalu + '.pdf') }}">
              Pobierz PDF
            </a>
            <div class="group-sm group-middle"><span class="project-page-social-title">KONTAKT</span>
              <div>
                <ul class="list-inline project-page-social-list">
                  <li><a class="icon mdi mdi-phone" href="tel:+48600202480"></a></li>
                  <li><a class="icon mdi mdi-email-outline" href="mailto:biuro@dmdinwestycje.pl"></a></li>
                  <li><a class="icon mdi mdi-facebook" href="https://www.facebook.com/dmddeweloper" target="_blank"></a></li>
                  <!-- <li><a class="icon mdi mdi-google-plus" href="#"></a></li> -->
                </ul>
              </div>
            </div>



            <form class="rd-form rd-mailform" id="contact-form">
              <div class="form-wrap wow fadeInRight">
                <input class="form-input" id="contact-name-6" type="text" name="name" data-constraints="@Required">
                <label class="form-label" for="contact-name-6">Twoje imię i nazwisko*</label>
              </div>
              <div class="form-wrap wow fadeInRight" data-wow-delay=".05s">
                <input class="form-input" id="contact-email-6" type="email" name="email" data-constraints="@Email @Required">
                <label class="form-label" for="contact-email-6">Twój adres e-mail*</label>
              </div>
              
              <div class="form-wrap wow fadeInRight" data-wow-delay=".2s">
                <input class="form-input" id="contact-phone-6" type="text" name="phone" data-constraints="@Numeric">
                <label class="form-label" for="contact-phone-6">Twój numer telefonu</label>
              </div>
              <input type="hidden" value="{{ lokal_data.id }}" name="lokal">
              <input type="hidden" value="Wiadomość ze strony 'Głównej'" name="title">
              <input type="hidden" value="Interesuje mnie ten lokal. Proszę o kontakt." name="message">
              <button class="button button-icon button-icon-right button-gray-3 wow fadeInRight" type="submit" data-wow-delay=".25s">
                <span class="icon mdi mdi-chevron-right"></span>Wyślij wiadomość
              </button>
            </form>
            <div id="Answering"></div>



          </div>
        </div>
      </div>
    </div>
  </section>
  
{% endblock %}
{% block bottom_scripts %}
<script>
    document.querySelector('#contact-form').addEventListener('submit', async function (e) {
        e.preventDefault();

        const form = e.target;
        const formData = new FormData(form);
        const outputDiv = document.getElementById('Answering');

        // Czyścimy poprzedni komunikat
        outputDiv.textContent = '';
        outputDiv.className = '';

        try {
        const response = await fetch('/api/contact', {
            method: 'POST',
            body: formData,
        });

        const result = await response.json();

        if (response.ok) {
            outputDiv.textContent = '✅ Wiadomość została wysłana!';
            outputDiv.classList.add('success-message');
            form.reset();
        } else {
            outputDiv.textContent = '❌ Błąd: ' + result.message;
            outputDiv.classList.add('error-message');
        }
        } catch (error) {
            outputDiv.textContent = '⚠️ Wystąpił problem z połączeniem.';
            outputDiv.classList.add('error-message');
            console.error(error);
        }

        // Znikanie po 5 sekundach
        setTimeout(() => {
            outputDiv.classList.add('hidden');
        }, 5000);
    });

</script>
{% endblock %}

