{% extends 'base.html' %}
{% block content %}
<!-- Breadcrumbs -->
<section class="bg-gray-7">
        <div class="breadcrumbs-custom box-transform-wrap context-dark">
            <div class="container">
                <h3 class="breadcrumbs-custom-title">Proces zakupu</h3>
                <div class="breadcrumbs-custom-decor"></div>
            </div>
            <div class="box-transform" style="background-image: url(static/images/bg-project.jpg);"></div>
        </div>
        <div class="container">
            <ul class="breadcrumbs-custom-path">
                <li><a href="/"><i class="bi bi-house" style="font-size: 24px;"></i></a></li>
                <li class="active">Proces zakupu</li>
            </ul>
        </div>
</section>
<section class="section parallax-container" data-parallax-img="static/images/bg-icon-3.jpg">
    <div class="parallax-content section-xl context-dark text-md-start">
      <div class="container">
        <h3 class="title-classic-3 wow fadeInRight">Proces zakupu w Wiśniowa House</h3>
        <p class="big text-spacing-75 text-white-06 wow fadeInRight" data-wow-delay=".1s">
          Zakup wymarzonego domu nigdy nie był prostszy – sprawdź 4 proste kroki, które dzielą Cię od życia w Wiśniowa House.
        </p>
        <div class="row row-lg row-30">
          <div class="col-sm-6 col-md-4 col-lg-3 oh-desktop">
            <article class="box-icon-creative wow slideInUp">
              <div class="box-icon-creative-body">
                <div class="box-icon-creative-icon linearicons-telephone"></div>
                <p class="box-icon-creative-title"><a href="tel:+48600202480">1. Kontakt z nami</a></p>
              </div>
            </article>
          </div>
          <div class="col-sm-6 col-md-4 col-lg-3 oh-desktop">
            <article class="box-icon-creative wow slideInDown">
              <div class="box-icon-creative-body">
                <div class="box-icon-creative-icon linearicons-calendar-check"></div>
                <p class="box-icon-creative-title"><a href="/kontakt">2. Spotkanie i prezentacja</a></p>
              </div>
            </article>
          </div>
          <div class="col-sm-6 col-md-4 col-lg-3 oh-desktop">
            <article class="box-icon-creative wow slideInUp">
              <div class="box-icon-creative-body">
                <div class="box-icon-creative-icon linearicons-pencil5"></div>
                <p class="box-icon-creative-title"><a href="javascript:void(0)">3. Podpisanie umowy</a></p>
              </div>
            </article>
          </div>
          <div class="col-sm-6 col-md-4 col-lg-3 oh-desktop">
            <article class="box-icon-creative wow slideInDown">
              <div class="box-icon-creative-body">
                <div class="box-icon-creative-icon linearicons-home4"></div>
                <p class="box-icon-creative-title"><a href="javascript:void(0)">4. Odbiór nieruchomości</a></p>
              </div>
            </article>
          </div>
        </div>
      </div>
    </div>
</section>

<!-- Our Services-->
<section class="section section-xl bg-default text-md-start">
    <div class="container">
      <div class="row row-xxl row-50 justify-content-lg-between">
        <div class="col-md-6">
            <!-- <h4>FAQ</h4> -->
            <!-- Bootstrap collapse-->
            <div class="card-group-classic" id="accordion6" role="tablist" aria-multiselectable="false">
              <!-- Bootstrap card-->
              <article class="card card-custom card-classic card-classic-2 wow fadeInLeft">
                <div class="card-header" role="tab">
                  <div class="card-title">
                    <a id="accordion6-card-head-jdocllls" data-bs-toggle="collapse" data-bs-parent="#accordion6" href="#accordion6-card-body-jifuxnja" aria-controls="accordion6-card-body-jifuxnja" aria-expanded="true" role="button">
                      Czy lokale są sprzedawane w stanie deweloperskim czy wykończone pod klucz?
                      <div class="card-arrow"></div>
                    </a>
                  </div>
                </div>
                <div class="collapse show" id="accordion6-card-body-jifuxnja" aria-labelledby="accordion6-card-head-jdocllls" data-bs-parent="#accordion6" role="tabpanel">
                  <div class="card-body">
                    <p>
                      Wiśniowa House oferuje lokale w stanie deweloperskim, co pozwala na dowolną aranżację przestrzeni 
                      według własnych potrzeb. Dla osób preferujących gotowe rozwiązania, istnieje możliwość skorzystania 
                      z opcji wykończenia pod klucz, dostosowanej do indywidualnych wymagań klienta.
                    </p>
                  </div>
                </div>
              </article>
              <!-- Bootstrap card-->
              <article class="card card-custom card-classic card-classic-2 wow fadeInLeft" data-wow-delay=".05s">
                <div class="card-header" role="tab">
                  <div class="card-title">
                    <a class="collapsed" id="accordion6-card-head-faq2" data-bs-toggle="collapse" data-bs-parent="#accordion6" href="#accordion6-card-body-faq2" aria-controls="accordion6-card-body-faq2" aria-expanded="false" role="button">
                      Jakie są opcje finansowania zakupu lokalu?
                      <div class="card-arrow"></div>
                    </a>
                  </div>
                </div>
                <div class="collapse" id="accordion6-card-body-faq2" aria-labelledby="accordion6-card-head-faq2" data-bs-parent="#accordion6" role="tabpanel">
                  <div class="card-body">
                    <p>
                      Deweloper współpracuje z zaufanymi doradcami kredytowymi, którzy pomogą znaleźć najlepsze rozwiązanie 
                      finansowe. Możesz skorzystać z kredytu hipotecznego lub innych form finansowania, a także liczyć na 
                      pełne wsparcie przy załatwianiu formalności.
                    </p>
                  </div>
                </div>
              </article>
              <!-- Bootstrap card-->
              <article class="card card-custom card-classic card-classic-2 wow fadeInLeft" data-wow-delay=".1s">
                <div class="card-header" role="tab">
                  <div class="card-title">
                    <a class="collapsed" id="accordion6-card-head-faq3" data-bs-toggle="collapse" data-bs-parent="#accordion6" href="#accordion6-card-body-faq3" aria-controls="accordion6-card-body-faq3" aria-expanded="false" role="button">
                      Czy osiedle jest wyposażone w ekologiczne technologie?
                      <div class="card-arrow"></div>
                    </a>
                  </div>
                </div>
                <div class="collapse" id="accordion6-card-body-faq3" aria-labelledby="accordion6-card-head-faq3" data-bs-parent="#accordion6" role="tabpanel">
                  <div class="card-body">
                    <p>
                      Tak, Wiśniowa House stawia na ekologiczne rozwiązania, takie jak energooszczędne systemy ogrzewania, 
                      dobre izolacje termiczne oraz przygotowanie infrastruktury pod instalacje fotowoltaiczne. Dbamy o 
                      środowisko, jednocześnie zapewniając niższe koszty utrzymania dla mieszkańców.
                    </p>
                  </div>
                </div>
              </article>
              <!-- Bootstrap card-->
              <article class="card card-custom card-classic card-classic-2 wow fadeInLeft" data-wow-delay=".15s">
                <div class="card-header" role="tab">
                  <div class="card-title">
                    <a class="collapsed" id="accordion6-card-head-faq4" data-bs-toggle="collapse" data-bs-parent="#accordion6" href="#accordion6-card-body-faq4" aria-controls="accordion6-card-body-faq4" aria-expanded="false" role="button">
                      Kiedy planowane jest zakończenie budowy i oddanie lokali do użytku?
                      <div class="card-arrow"></div>
                    </a>
                  </div>
                </div>
                <div class="collapse" id="accordion6-card-body-faq4" aria-labelledby="accordion6-card-head-faq4" data-bs-parent="#accordion6" role="tabpanel">
                  <div class="card-body">
                    <p>
                      Planowane zakończenie budowy to IV kwartał 2025 roku. Po tym terminie rozpocznie się proces odbiorów 
                      technicznych oraz przekazywania lokali nowym właścicielom. Szczegółowy harmonogram można uzyskać, 
                      kontaktując się z biurem sprzedaży.
                    </p>
                  </div>
                </div>
              </article>
            </div>
          </div>
          
        <div class="col-md-6 col-lg-5">
          <article class="team-classic team-classic-2">
            <div class="unit flex-column flex-sm-row align-items-start align-items-sm-center">
              <div class="unit-left"><a class="team-classic-figure-3" href="#"><img src="static/images/team-bartek.jpg" alt="" width="99" height="99"/></a></div>
              <div class="unit-body">
                <h5 class="team-classic-title-2">Masz pytania? Skontaktuj się z nami!</h5>
                <div class="team-classic-name"><a href="#">Bartosz Piesiewicz</a>, <span>Konsultant</span></div>
              </div>
            </div>
          </article>
          <form class="rd-form rd-mailform" id="contact-form">
            <div class="form-wrap wow fadeInRight">
              <input class="form-input" id="contact-name-6" type="text" name="name" data-constraints="@Required">
              <label class="form-label" for="contact-name-6">Twoje imię i nazwisko*</label>
            </div>
            <div class="form-wrap wow fadeInRight" data-wow-delay=".05s">
              <input class="form-input" id="contact-email-6" type="email" name="email" data-constraints="@Email @Required">
              <label class="form-label" for="contact-email-6">Twój adres e-mail*</label>
            </div>
            <div class="form-wrap wow fadeInRight" data-wow-delay=".15s">
              <!--Select Lokali-->
              <select class="form-input" data-minimum-results-search="Infinity" data-constraints="@Required" name="lokal" data-placeholder="Wybierz lokal">
                <option label="placeholder"></option>
                {% for building, locales in available_premises.items() %}
                  <optgroup label="{{ building }}">
                    {% for lokal in locales %}
                      <option value="{{ lokal.id_direct }}">{{ lokal.name }}</option>
                    {% endfor %}
                  </optgroup>
                {% endfor %}
              </select>
              <input type="hidden" value="Wiadomość ze strony 'Proces Zakupu'" name="title">
              <input type="hidden" value="Interesuje mnie ten lokal. Proszę o kontakt." name="message">
            </div>
            <div class="form-wrap wow fadeInRight" data-wow-delay=".2s">
              <input class="form-input" id="contact-phone-6" type="text" name="phone" data-constraints="@Numeric">
              <label class="form-label" for="contact-phone-6">Twój numer telefonu</label>
            </div>
            <button class="button button-icon button-icon-right button-gray-3 wow fadeInRight" type="submit" data-wow-delay=".25s">
              <span class="icon mdi mdi-chevron-right"></span>Wyślij wiadomość
            </button>
          </form>
          <div id="Answering" class="mt-5"></div>
          
        </div>
      </div>
    </div>
</section>
  
  
  
{% endblock %}
{% block bottom_scripts %}
<script>
  document.querySelector('#contact-form').addEventListener('submit', async function (e) {
    e.preventDefault();

    const form = e.target;
    const formData = new FormData(form);
    const outputDiv = document.getElementById('Answering');

    // Czyścimy poprzedni komunikat
    outputDiv.textContent = '';
    outputDiv.className = '';

    try {
      const response = await fetch('/api/contact', {
        method: 'POST',
        body: formData,
      });

      const result = await response.json();

      if (response.ok) {
        outputDiv.textContent = '✅ Wiadomość została wysłana!';
        outputDiv.classList.add('success-message');
        form.reset();
      } else {
        outputDiv.textContent = '❌ Błąd: ' + result.message;
        outputDiv.classList.add('error-message');
      }
    } catch (error) {
      outputDiv.textContent = '⚠️ Wystąpił problem z połączeniem.';
      outputDiv.classList.add('error-message');
      console.error(error);
    }

    // Znikanie po 5 sekundach
    setTimeout(() => {
      outputDiv.textContent = '';
      outputDiv.className = '';
    }, 5000);
  });
</script>
{% endblock %}